<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="UTF-8" />
  <title>Venue Details | Elite Spaces</title>
  <style>
    :root { --primary: #6366f1; --bg: #0f172a; --text: #f8fafc; }
    body { font-family: 'Inter', sans-serif; margin: 0; background: var(--bg); color: var(--text); }
    
    /* New Header with Back Button */
    header { padding: 20px 5%; display: flex; align-items: center; gap: 20px; background: rgba(15, 23, 42, 0.9); backdrop-filter: blur(10px); position: sticky; top: 0; z-index: 100; border-bottom: 1px solid #334155; }
    
    .btn-back { 
      text-decoration: none; color: #94a3b8; font-weight: 600; font-size: 14px; 
      display: flex; align-items: center; gap: 8px; transition: 0.3s;
      padding: 8px 16px; border-radius: 50px; background: rgba(255,255,255,0.05); border: 1px solid rgba(255,255,255,0.1);
    }
    .btn-back:hover { background: var(--primary); color: white; border-color: var(--primary); transform: translateX(5px); }

    .container { max-width: 1000px; margin: 40px auto; padding: 0 20px; }
    .hall-card { background: #1e293b; border-radius: 24px; overflow: hidden; border: 1px solid #334155; }
    .hall-img { height: 400px; width: 100%; object-fit: cover; background: #334155; }
    .content { padding: 40px; }
    .badge { display: inline-block; padding: 6px 12px; border-radius: 8px; background: rgba(99, 102, 241, 0.1); color: #818cf8; margin: 4px; font-weight: 600; border: 1px solid rgba(99, 102, 241, 0.2); }
    .btn-book { display: inline-block; background: var(--primary); color: white; padding: 16px 32px; border-radius: 12px; text-decoration: none; font-weight: bold; margin-top: 30px; transition: 0.3s; }
    .btn-book:hover { box-shadow: 0 10px 20px rgba(99, 102, 241, 0.3); transform: translateY(-2px); }
  </style>
</head>
<body>

<header>
  <a href="index.html" class="btn-back">‚Üê Back to Catalog</a>
  <h1 style="margin:0; font-size:18px;">Venue Details</h1>
</header>

<div class="container">
  <div class="hall-card">
    <img id="hImg" class="hall-img" src="">
    <div class="content">
      <div id="hRating" style="color:#fbbf24; font-size:20px; margin-bottom:10px;">‚≠ê 0.0</div>
      <h2 id="hName" style="font-size: 32px; margin: 0 0 15px 0;">Loading...</h2>
      <p id="hDesc" style="line-height: 1.8; color: #94a3b8; font-size: 16px;">Description loading...</p>
      <div id="hTags"></div>
      <a id="bookLink" class="btn-book" href="#">Book This Venue Now üìÖ</a>
    </div>
  </div>
</div>

<script type="module">
  import { initializeApp } from "https://www.gstatic.com/firebasejs/10.8.0/firebase-app.js";
  import { getFirestore, collection, query, where, getDocs } from "https://www.gstatic.com/firebasejs/10.8.0/firebase-firestore.js";
  import { firebaseConfig } from "./firebase-config.js"; // Uses your secure config file

  const app = initializeApp(firebaseConfig);
  const db = getFirestore(app);
  const hallId = Number(new URLSearchParams(location.search).get("id"));

  async function loadData() {
    const q = query(collection(db, "halls"), where("id", "==", hallId));
    const snap = await getDocs(q);
    if(!snap.empty) {
      const h = snap.docs[0].data();
      document.getElementById("hName").textContent = h.name;
      document.getElementById("hDesc").textContent = h.desc;
      document.getElementById("hImg").src = h.imageUrl || '';
      document.getElementById("hTags").innerHTML = (h.facilities || []).map(f => `<span class="badge">${f}</span>`).join('');
      // Set the link for the next page
      document.getElementById("bookLink").href = `ccccc.html?id=${hallId}`;
    }
  }
  loadData();
</script>
</body>
</html>
